{% extends 'base.html' %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h3>Controle de Carregamentos</h3>
  <a href="{{ url_for('adicionar') }}" class="btn btn-success">+ Novo Carregamento</a>
</div>

<table class="table table-hover align-middle">
  <thead class="table-primary">
    <tr>
      <th>ID</th>
      <th>Placa</th>
      <th>Status</th>
      <th>Rota</th>
      <th>Destino</th>
      <th>Atualizado em</th>
      <th>Atualizado por</th>
      <th>Ações</th>
    </tr>
  </thead>
  <tbody>
    {% for c in carregamentos %}
    <tr>
      <td>{{ c.id }}</td>
      <td>{{ c.placa }}</td>
      <td>{{ c.status }}</td>
      <td>{{ c.rota or "-" }}</td>
      <td>{{ c.destino or "-" }}</td>
      <td>{{ c.atualizado_em.strftime('%d/%m/%Y %H:%M') if c.atualizado_em else '-' }}</td>
      <td>{{ c.atualizado_por or '-' }}</td>
      <td>
        <a href="{{ url_for('editar', id=c.id) }}" class="btn btn-sm btn-warning">Editar</a>
        <form action="{{ url_for('excluir', id=c.id) }}" method="POST" style="display:inline;">
          <button class="btn btn-sm btn-danger" onclick="return confirm('Deseja excluir este registro?')">Excluir</button>
        </form>
      </td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}
